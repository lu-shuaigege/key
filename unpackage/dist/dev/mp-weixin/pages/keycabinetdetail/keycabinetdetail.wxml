<view class="keycabinetlist"><image class="dot-bg" src="../../static/dot-bg.png"></image><view class="keycabinetlist-top"><image src="{{avatarUrl}}" data-event-opts="{{[['tap',[['toLogout']]]]}}" bindtap="__e"></image><view class="keycabinetlist-top-r"><text class="keycabinetlist-top-r-name">{{nickName}}</text></view></view><view hidden="{{!(manageNew.status==1&&cabinetList.length==1)}}" class="administratornews"><image src="../../static/keycabinetlist-horn.png"></image><view class="administratornews-con"><text class="name">{{manageNew.user}}</text><text class="news">{{manageNew.message}}</text></view><button data-event-opts="{{[['tap',[['lookAuthList']]]]}}" bindtap="__e">点击查看</button></view><view class="keycabinetdetail"><view class="keycabinetdetail-up"><view class="keycabinet-normal-top"><text class="keycabinet-normal-top-name">{{cabinetDetail.cabinetname}}</text><view class="keycabinet-normal-top-r"><block wx:if="{{cabinetDetail.online.status==1}}"><image class="dot-green" src="../../static/dot-green.png"></image></block><block wx:if="{{cabinetDetail.online.status==0}}"><image class="dot-green" src="../../static/dot-grey.png"></image></block><block wx:if="{{cabinetDetail.online.status==1}}"><text>网络正常</text></block><block wx:if="{{cabinetDetail.online.status==0}}"><text class="exception-text">网络异常</text></block></view></view><view><text class="keycabinet-normal-top-num"><text>NO.</text>{{cabinetDetail.cabinetno}}</text><view class="keycabinet-normal-top-r"><block wx:if="{{cabinetDetail.alarm.status==0}}"><image src="../../static/light-green.png"></image></block><block wx:if="{{cabinetDetail.alarm.status==1}}"><image src="../../static/light-red.png"></image></block><block wx:if="{{cabinetDetail.alarm.status==0}}"><text>{{cabinetDetail.alarm.title}}</text></block><block wx:if="{{cabinetDetail.alarm.status==1}}"><text class="exception-text">{{cabinetDetail.alarm.title}}</text></block></view></view><view class="keycabinetdetail-top"><text class="keycabinetdetail-top-name">钥匙总数：</text><text class="textblue">{{cabinetDetail.keynum.total}}</text><text class="keycabinetdetail-top-name">使用中：</text><text class="textgrey">{{cabinetDetail.keynum.used}}</text><text class="keycabinetdetail-top-name">错位：</text><text class="textred">{{cabinetDetail.keynum.error}}</text></view></view><view class="keycabinetdetail-con"><view class="keycabinetdetail-con-top"><view class="keycabinetdetail-con-topone"><image src="../../static/text-blue.png"></image><text>钥匙在位</text></view><view class="keycabinetdetail-con-topone"><image src="../../static/text-grey.png"></image><text>钥匙不在位</text></view><view class="keycabinetdetail-con-topone"><image src="../../static/text-red.png"></image><text>钥匙错位</text></view><view class="keycabinetdetail-con-topone"><image src="../../static/text-none.png"></image><text>空</text></view><view class="keycabinetdetail-con-topone"><image src="../../static/stop.png"></image><text>无权限</text></view></view><block wx:for="{{cabinetDetail.keylist}}" wx:for-item="items" wx:for-index="index" wx:key="index"><view class="keycabinetdetail-con-list"><block wx:for="{{items.keys}}" wx:for-item="item" wx:for-index="__i0__" wx:key="keyno"><view class="keycabinetdetail-listone"><view data-event-opts="{{[['tap',[['showRecord',['$0','$1','$2','$3','$4','$5'],[[['cabinetDetail.keylist','',index],['keys','keyno',item.keyno,'status']],[['cabinetDetail.keylist','',index],['keys','keyno',item.keyno,'mispos']],[['cabinetDetail.keylist','',index],['keys','keyno',item.keyno,'haskey']],[['cabinetDetail.keylist','',index],['keys','keyno',item.keyno,'access']],'cabinetDetail.cabinetno',[['cabinetDetail.keylist','',index],['keys','keyno',item.keyno,'keyno']]]]]]]}}" class="{{['keycabinetdetail-listone-type',(item.status==0)?'grey':'',(item.status==1)?'blue':'',(item.mispos==1)?'red':'',(item.haskey==0)?'none':'']}}" bindtap="__e">{{''+item.keyno+''}}</view><text class="name">{{item.title}}</text><block wx:if="{{item.access==0&&item.haskey==1}}"><image src="../../static/key-disabled.png" data-event-opts="{{[['tap',[['applyAuth',['$0','$1'],[[['cabinetDetail.keylist','',index],['keys','keyno',item.keyno,'keyno']],'cabinetDetail.cabinetno']]]]]}}" bindtap="__e"></image></block><block wx:if="{{loaddingKeys[item.keyno]}}"><image src="../../static/loadinggrey.gif"></image></block></view></block></view></block></view></view><view class="keycabinetlist-line"><image src="../../static/keycabinetlist-line.png"></image></view><view class="keycabinetlist-con"><scroll-view class="keycabinetlist-con-p" scroll-x="true"><block wx:for="{{cabinetList}}" wx:for-item="item" wx:for-index="index" wx:key="cabinetno"><view data-event-opts="{{[['tap',[['lookDetail',['$0'],[[['cabinetList','cabinetno',item.cabinetno,'cabinetno']]]]]]]}}" hidden="{{!(item.cabinetno!=cabinetDetail.cabinetno)}}" class="keycabinetlist-con-s" bindtap="__e"><image src="../../static/default-cabinetlist.png"></image><text>{{item.cabinetname}}</text><text>{{item.cabinetno}}</text></view></block></scroll-view></view><view hidden="{{!(showRecords)}}" class="records"><view class="records-bg"></view><view class="records-conbg"><view class="records-conbg-top"><text>钥匙领还</text><image src="../../static/guanbi.png" data-event-opts="{{[['tap',[['hideRecord']]]]}}" bindtap="__e"></image></view><view class="records-con"><block wx:for="{{keyrecordlist}}" wx:for-item="item" wx:for-index="__i1__" wx:key="keyno"><view class="records-con-list"><view class="records-con-list-top"><image src="../../static/record-photo.png"></image><text>{{item.takeuser}}</text></view><view class="records-con-listone"><view class="one"><text class="time">{{item.taketime}}</text><text class="detail">领取</text></view><view class="one"><text class="time">{{item.returntime}}</text><text class="detail">归还</text></view></view><view class="records-con-line"></view></view></block><view class="records-con-button"><button data-event-opts="{{[['tap',[['hideRecord']]]]}}" class="cancel" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['getKey']]]]}}" hidden="{{!(status!=0)}}" class="confirm" bindtap="__e">领取钥匙</button><button data-event-opts="{{[['tap',[['returnKey']]]]}}" hidden="{{!(status==0)}}" class="confirm" bindtap="__e">归还钥匙</button></view></view></view></view><view hidden="{{!(showApprover)}}" class="records"><view class="records-bg"></view><view class="records-conbg"><view class="records-conbg-top"><text>钥匙临时申请</text><image src="../../static/guanbi.png" data-event-opts="{{[['tap',[['hideApprover']]]]}}" bindtap="__e"></image></view><view class="records-con"><view class="selectapprover">选择审批人</view><radio-group data-event-opts="{{[['change',[['radioChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{approverList}}" wx:for-item="item" wx:for-index="__i2__" wx:key="userid"><label class="uni-list-cell uni-list-cell-pd"><radio value="{{item.userid}}" color="#2fa4ff"></radio><text>{{item.username}}</text></label></block></radio-group><view class="selectapprover">使用原因</view><radio-group data-event-opts="{{[['change',[['radioChange1',['$event']]]]]}}" bindchange="__e"><block wx:for="{{getusereasonList}}" wx:for-item="item" wx:for-index="__i3__" wx:key="sortno"><label class="uni-list-cell uni-list-cell-pd"><radio value="{{item.title}}" checked="{{checked}}" color="#2fa4ff"></radio><text>{{item.title}}</text></label></block></radio-group><input hidden="{{!(showInput)}}" class="usereason" type="text" value="{{inputUsereason}}" placeholder="请输入使用原因" data-event-opts="{{[['input',[['__set_model',['','inputUsereason','$event',[]]]]]]}}" bindinput="__e"/><view class="records-con-button"><button data-event-opts="{{[['tap',[['hideApprover']]]]}}" class="cancel" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['keyOneuseNews']]]]}}" class="confirm" bindtap="__e">立即申请</button></view></view></view></view></view>